___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Xiaomi Ads Pixel",
  "categories": ["AFFILIATE_MARKETING", "ADVERTISING"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAygAAAMoCAYAAAAk9MTxAAAABmJLR0QA/wD/AP+gvaeTAAAgAElEQVR4nOzdeZxlZ10n/s+5Vb0lna2zdBbISha2gIQ1gLLpOIgiakRBFgE73Z2ABFFHGbQd/f1mcHDQCXQWEVRGVOIoIgMKKDoxIPsmEJKwJCSh09nTSXqt+8wf1Um6k+rqulX33ueeuu/363Vf1XXrnnM/aZrq+vT3ec5pAkDflNfn0GxPk5JD0qRz/8cmB6dkIiUHpcnk/R+TlUmWJJlIcvAep9rf550kh+zz85ImTQ7dR8xDkzTz+M9bsjvvfGxPcu88j92Z5O4Znr9799emldyTJjv2+Pq9u9/3PluTbLv/sybbUrJ1hozdJHemSUnJHbu/dnuSpJs70klJkztT0s1U7spEprI6W5oN2TXP/z4A9jCfv6AAWq28NsuyPQdlIgenk0PTzUEpOSid3R+Tw+7/PFl5/3P3lYC9f/g/7EEfGW/TpemBsnRfSbqvHN21+zVb0mRLSu5IyV1psiWdbElyd7q5I93clYlsyQHZ0rw191T7rwGoQEEBWqe8OquyLKvS5PB0syolq9JkVUoOTZODMj1JOCTN/YXjoExPHw7d/eslFeNDr6YnOsmdKdmSTu5OyZa9nmuyJcntKbk1TW5LN7elk9symduyKbc1l2Wq6n8BQA8UFKCq8tosS3JkdmV1ulmdTo5MkyOTHJ2SI9PkiJSsSu5/HB7fu6BXdyS5Ncltux83J7klyeYkm1JycyZyc5JN2Zmbm0vnvRwPYMH8JQ8MRHl9Ds3OHJddOTYTOSYlxyU5JslxSVYnOWL35wfPdh6ginsyXV5u2v3xhkwXmetTsimd6Y/NxdlcNSWwKCkoQM/Kq7MqS3JCJnJ8pnJCmpyQ5NhkrxKyompIYBh2JNmU5Pokm9Lk+pRcmybXpZvr0sl1zcZsqpwRaBkFBXiIsjZHpeSUdHJSkhOSHJ8mx6fkhN2fz/dKTsD42ZbsLi0l1yW5Lk2+kybfyVS+2VycG2oHBEaLggJjqqzLYUlOTpNHp+RRSU7e/XhE9r58LcAg7cj0BOZbD3ksz9eat+11KWhgDCgosIiVNTkkS3JGunlUSs5IkzOSnJ7kpCRLK8cD2J9dSa5LclWSr6XJlSm5MlP5enNpbqmcDRgQBQUWgbImx2RJHpVuzkjJo3YXkUdmej8IwGJ0S5Kvp+TKJN9Ik6+lk68178i1tYMBC6OgQIuUNVmSJTktJWftXpb16CRPTHJ05WgAo+KuJFdneuLyuSSfS/LFZmPurhsLmCsFBUZUWZ+jU3JWkjOTPG73x1OTTFYNBtA+JdP7Wr6UJl9JN19KJ59tNua7tYMBD6WgwAgor83BmcqZSc7aXUrOSvKoyrEAFrs7knw1yb+myRVJPuOyyFCfggJDVt6YA3NPnpiSJ6bJkzK9ROuU2rkASFJyfZp8Nk0+m+Qzmci/NRfmrtqxYJwoKDBgZU2OyWSemJKnJ3lGpgvJssqxAJibbpIrM72X5V/TyRV5R77WTC8bAwZAQYE+KudkIkfljN2b2O8rJJZqASwum5J8NvctDZvIZ5oLs712KFgsFBRYgLIhnWzOmSl5TpLnJHlmkoMrxwJguO5NkyvSzT9lIh/P5ny2uSxTtUNBWyko0KOyLicned7ux7OTHFE3EQAj5p4kn0zysSQfy+p8odmQbuVM0BoKCuxHWZNjMpEfTu6fkhxbORIA7XJLSv45yccykb93M0mYnYICD1LOyUSOyOMzPSH50SRnx/9XAOifbyX5WJp8MBP5iP0rsDc/dEGSsiZHZCLPznQh+ZEkqypHAmA83JvkE2nywezK3zSX5rragaA2BYWxVc7PYzOVFyV5QaZvjNipHAkAvpySv8tE/rp5Rz5fOwzUoKAwVsp5eXRKzkny4pScUTsPAMziujR5f0r+Lqvzz82G7KodCIZBQWFR230Z4LNT8oIkPxV3bAegnW5N8qE0uSw35x+ay7KjdiAYFAWFRadsSCeb8qw0+dkkL0xyZO1MANBHdyT5uyR/ntX5qMkKi42CwqJx//KtklckObF2HgAYgtuS/FWavCcbc0WTlNqBYKEUFFqtrMnxmcyLUvLKJI+vnQcAKpres9LNHzcX5wu1w8B8KSi0TlmTI9LJz6STl6TkqfHnGAAe7Asp+bPsyv9q3pmbaoeBXvjBjlYoSZP1eXpKXpbkZUlW1M4EAC0wleTjSS7N6vyN/Sq0gYLCSCvrc/TuPSW/EFfgAoCFuDHJe5Jc2lyUb9UOA/uioDByyoZ0clOek2RNkh9PsqRyJABYTLpJ/ilN3pNluax5W7bWDgR7UlAYGeU1WZ0lOTfTxeS42nkAYAzcnOQPM5mLmgtzfe0wkCgojICyNt+XJmtjbwkA1NJN8qEkf9BclI/VDsN4U1CoYvcd3n8kJa9L8rzaeQCA3Uo+nyaXZHneY/kXNSgoDFVZk0MymVem5IIkJ9TOAwDs0+Yk785k3m75F8OkoDAUZW1OTPLLafLzsYwLANpkR5I/TZO3NBtzTe0wLH4KCgNV1uSUTORXkvx8XI0LANpsep9Kk//SbMxnaodh8VJQGIhybh6XTn4pyUuSTNTOAwD01RXp5Debd+Qfawdh8VFQ6KuyPs9Iya8m+ZH48wUAi90VafKWbMwHm6TUDsPi4AdI+qKsy/OS/FaSs2tnAQCG7nPp5jeaS/Kh2kFoPwWFBSnr8tSU/E6aPLd2FgCgun9LyZuai/NPtYPQXgoK81LOy6PTzW8m+an4cwQA7O2KJL/WXJTLawehffxgSU/Kupye5E2x+R0A2L+PpeRXmovzhdpBaA8FhTkp5+WE3ROTlyWZrJ0HAGiNbpK/SPLm5qJ8q3YYRp+CwqzKG3Ng7s0vp+RX4gaLAMD87UyTi7Irv9Fcmjtrh2F0KSjMqCRN1uWnkrw1yfG18wAAi8atafLbuTlvby7LVO0wjB4FhYcoa/PkdPL7KXla7SwAwKL19TR5Q7Mxf187CKNFQeF+5bV5WHbl/0/yc/FnAwAYjg+myQXNxlxTOwijwQ+hpKzJAenk19PkDbHPBAAYvh1J3pap/Jfm0txbOwx1KShjrqzPs1NyUZLTa2cBAMbeDWnyumZj/rp2EOpRUMZUWZ+jU/K7mb5sMADAKPlgmqxvNua7tYMwfArKmClJk/V5WUr+R5LDa+cBANiHe5L8dm7JW13ta7woKGOknJ/HpptLXJ0LAGiRL6TJuc3GfKZ2EIZDQRkD5YKsyNZsSJMLkiypnQcAoEe70uQPsixvbt6WrbXDMFgKyiK3+54mf5KSM2pnAQBYoG8m+fnmolxeOwiDo6AsUmVDJnNTfinJb8fUBABYPHYl+b1M5jebC7O9dhj6T0FZhMp5eXS6+ZMkZ9XOAgAwIP+eTl7RvCOfrx2E/lJQFpHdV+h6XUrekmRZ7TwAAAO2M8n/yFTe3FyanbXD0B8KyiJRzs9Jmcq7k/xA7SwAAEP26UzlFc2lubJ2EBauUzsAC1fW55WZyleinAAA4+nJmcjnytq8qnYQFs4EpcV2Xz74D9LkF2pnAQAYCSV/lW5e01yaO2tHYX4UlJYq5+ZR6eQvkzymdhYAgBFzVZq8uNmYL9YOQu8s8Wqhsj4vTyefiXICADCT01Lyb2V9frF2EHpngtIi5VU5KEtzSZr8bO0sAAAt8f4kr2ouyu21gzA3CkpLlHU5K8lfJjmldhYAgJb59u4lX5+pHYT9s8SrBcravDTJ5VFOAADm46SUXF7W59W1g7B/JigjrGzIZG7K7yT51dpZAAAWiUszlfPd2HF0KSgjqpyXwzOVv0yT59bOAgCwyFyenTmneWduqh2Eh1JQRlBZlzMzvaHrpNpZAAAWpZLrU/Ki5pJ8tnYU9mYPyogp63JOkk9EOQEAGJwmD0snl5f1eXntKOzNBGVElA3pZFP+S5r8evzvAgAwLCXJ7+aWvKm5LFO1w+AH4ZFQ1uSAdPLeNHlh7SwAAGPq/ZnKS5tLc2/tIONOQamsvDqrsjQfSPL02lkAAMbcp1Pyo83F2Vw7yDhTUCoq63Jykg8lOb12FgAAkiTfSvL85qJ8o3aQcWWTfCVlbZ6c5JNRTgAARsnJST5R1ucZtYOMKwWlgrIuP5YmH09yVO0sAAA8xKqUfLSszU/XDjKOFJQhK+vz6iT/O8kBtbMAALBPy9PkvWVtzq8dZNwoKENSkqasz39NyTuTTNbOAwDAfk2kyYVlXf5bsXd7aPxGD0FJmqzLHyR5be0sAADMQ5NLclTWNxvSrR1lsVNQBqyck4kckT9M8vO1swAAsCDvzeq8otmQXbWDLGYKygCVDZnMTXl3kp+rnQUAgL74QCbz082F2V47yGKloAxIOSdLc2T+IiUvqp0FAIA+avKhLMtPNW/L1tpRFiMFZQDKmhyQifxNkh+qnQUAgIH4l2zPjzbvypbaQRYbBaXPyhtzYO7JB5I8p3YWAAAG6jPZkR9u/ii31Q6ymCgofVRen0OzPX+f5Cm1swAAMARNPpul+cHm93NH7SiLhfug9El5Yw7M9nwgygkAwPgoeWK258PlVTmodpTFQkHpg3JBVuSefDDJM2tnAQBg6J6aZflweWMOrB1kMVBQFqick6XZnr9K8qzaWQAAqObpuSfvL6/M8tpB2s4elAUoa7IkE/mrJD9WOwsAACPh7zOZH3eflPkzQZmnck4m0smfRDkBAOABP5xdeW/ZkMnaQdpKQZmHkjQ5Ihenyc/WzgIAwMj5idyUPyob/Kw9H37TelSSJutzUZLX1M4CAMDIenluyjtqh2gjBaVXa/PbKTm3dgwAAEbe2rI2v1k7RNvYJN+Dsi6vSfKHtXMAANAaJSWvaS7Ou2oHaQsFZY7KuXl+OvnbxIYnAAB6MpXkJ5qL8oHaQdpAQZmDcm6emE4+nmRl7SwAALTSvenkOc078qnaQUadgrIf5fyclG4+mZLVtbMAANBqN6fJ2c3GXFM7yCizSX4W5bwcnql8WDkBAKAPjkzJh8trc2TtIKNMQdmHckFWpJsPJDm9dhYAABaNR2RXPljW5IDaQUaVgjKDkjTZlvckObt2FgAAFp0np5N3FtstZqSgzGRtfiPJT9aOAQDAItXkZ7Muv1I7xijS2h6knJcXppu/jvIGAMBgdVPywubifLB2kFGioOyhrMkZmci/JTmkdhYAAMbClnTz1OaSfK12kFGhoOxW1uWwJJ9O8ojaWQAAGCvfyLI8tfn93FE7yCiwjClJ2ZBOkj+LcgIAwPCdnu35i3JOJmoHGQUKSpJszu8m+Y+1YwAAMLb+Q47Ib9cOMQrGfolXWZuXpsn/qp0DAICxV1LyM83FeV/tIDWNdUEp5+XR6ebTiRvlAAAwEu7OVJ7UXJorawepZWyXeO2+U/x7o5wAADA6VqaT95ULsqJ2kFrGtqBkW96R5MzaMQAAYC9NHptt+b3aMWoZyyVeZX1enJK/qJ0DAABm8dLmory3dohhG7uCUtbnESn5XJKDa2cBAIBZbEknT2zekatqBxmmsVriVV6bZSl5X5QTAABG30Hp5r3ltVlWO8gwjVVBya68Lcn31Y4BAABzdFam8ru1QwzT2CzxKutyTjLe15QGAKCVSjp5UfOO/G3tIMMwFgWlnJ9jM5WvJFlVOwsAAMzDLdmZxzTvzE21gwzaeCzx6uYPo5wAANBeR2Qyl9QOMQyLvqCUdVmTkufXzgEAAAvS5IVlbV5WO8agLeolXuX8nJSpfCnJQbWzAABAH9yZqZzZXJrragcZlEU7QSkb0slU3h3lBACAxeOQTOSPyiIeNCzagpJNuSDJD9SOAQAAffa8rM3a2iEGZVE2r7ImZ2Qin0+yonYWAAAYgHvTzeObS3J17SD9tugmKGVDJjORP41yAgDA4nVAOnlX2bD4fp5fdP9B2ZzXJ3lS7RgAADBgz8hNeU3tEP22qJZ4lTU5PhP5apKVtbMAAMAQ3JmJPKp5e26sHaRfFtcEZSIXRjkBAGB8HJJdeWvtEP20aCYoZW1+Mk3+qnYOAACo4AXNRfk/tUP0w6IoKOVVOShL87U0eVjtLAAAUMG1OTCPbt6ae2oHWajFscRreX5HOQEAYIydkHvyptoh+qH1E5SyLmcl+VSSidpZAACgol3p5onNJflS7SAL0eoJSjknEym5NMoJAABMppONpeVDiFYXlByZc9PkCbVjAADAiDg76/LS2iEWorXtqrw+h2Z7rk5yRO0sAAAwQm7IgTm9rRvm2ztB2Z43RzkBAIAHOy735pdrh5ivVk5QypqcsvuO8ctqZwEAgBG0NZ08snlHrq0dpFftnKBM5H9EOQEAgH1ZkZL/r3aI+WjdBKWsz7NT8k+1cwAAwIgrafL9zcb8a+0gvWjVBGX3ZYV/v3YOAABogSYlb23bZYdbVVByeF6T5MzaMQAAoCWekrV5Se0QvWhNmyrrszLJNSlZXTsLAAC0yLWZzOnNhdleO8hctGmC8ovKCQAA9OyE7Mwv1A4xV62YoOy+KeM3k6yqnQUAAFpoc5qc0mzM3bWD7E87Jijb88tRTgAAYL6OSsl5tUPMxchPUMqaHJGJfCvJQbWzAABAi92R5OTmotxeO8hsRn+C0smvRzkBAICFOjRNLqgdYn9GeoJSzs+xmco1SVbUzgIAAIvA3Sk5pbk4m2sH2ZfRnqB08xtRTgAAoF9Wpsmv1g4xm5GdoJR1OTnJlUmW1M4CAACLyLaUPKK5ODfUDjKTUZ6g/FqUEwAA6LflSX6pdoh9GckJSlmb49Lkm0mW1c4CAACL0D2ZyonNpbmldpAHG9UJyi9FOQEAgEE5MJM5v3aImYzcBKW8OquyNNcmWVk7CwAALGK3ZXtObN6VLbWD7Gn0JijL8rooJwAAMGirsjzn1g7xYCM1QSlvzIG5J99JckTtLAAAMAY2ZWtOav4422oHuc9oTVDuyblRTgAAYFiOzoq8vHaIPY3MBKWsyZJM5Jokx9fOAgAAY+RbWZ3Tmw3ZVTtIMkoTlIm8IsoJAAAM28nZnJ+sHeI+o1NQSl5XOwIAAIypX6wd4D4jUVDKujwvTR5bOwcAAIylkqeVtXly7RjJiBSUJK+tHQAAAMZaMxo/k1ffJF/W5sQ0uSbJRO0sAAAwxnakyQnNxmyqGaL+BGW6qSknAABQ19Ika2uHqDpBKWtyQCby3SSrauYAAACSJJszmeObC7O9VoC6E5TJvDLKCQAAjIqjsivn1AxQt6CUrKv6/gAAwN5KLqj59tUKSlmX5yV5TK33BwAAZtDkCeW8PKXW29eboDT5hWrvDQAA7NtUXl3rratski/n5fB0c0OSZTXeHwAAmNXd2Z5jm3dly7DfuM4EpZtXRDkBAIBRtTLL89M13rjWEq9XVXpfAABgbqos8xp6QSnn5mlJHj3s9wUAAHpQ8rRy3vB/bh/+BKVTb8MNAADQg+7wVz4NdZN8WZ+VKbkxyUHDfF8AAGBebs1kjhvmneWHPUH52SgnAADQFodnZ144zDccbkEpNscDAECrNMP9GX5oS7zKmpySiVw9zPcEAAAWbCpNHtZszKZhvNnwJiid/FyUEwAAaJuJdId3T5ThFZSmzo1eAACABWrykuG91RCUdTkryWeH8V4AAMAAdHNac0muHvTbDGeC0uRnh/I+AADAYDT5mWG8zcALStmQTrp58aDfBwAAGKDOcJZ5DX6CsinfnyYPG/j7AAAAg1NyRjkvTxj02wy+oFjeBQAAi0MZ/BRloJvkyzlZmiNyY5LDB/k+AADAUNyY1Xl4syHdQb3BYCcoq/K8KCcAALBYHJtNedog32CwBaWTFw30/AAAwHAN+Gf8gRWUsiGdJC8Y1PkBAIAKSn5ykKcf3ATlpjw9ydEDOz8AAFDDieXcPG5QJx9cQSmWdwEAwKI0Mbif9QdXUJr8+MDODQAA1DPAYcRACkpZm+9LctIgzg0AAFR3Zjkvpw3ixIOZoLh6FwAALG4lPzaI0w6moNh/AgAAi9uAfubv+53ky5qckolc0+/zAgAAI6WbkmOai7O5nyft/wRlIs/v+zkBAIBR00mTH+r/SfutyQ/3/ZwAAMAo+o/9PmFfl3iVV2Z5VuTWJAf087wAAMBIui235Kjmskz164T9naAszw9EOQEAgHGxKkfkSf08Yb+XePV9xAMAAIy0vnaA/haURkEBAIAx09cO0Lc9KOX8nJSpfKtf5wMAAFqhr5cb7t8EZcrlhQEAYAz19XLD/Vzi5fLCAAAwnvq2zKsvBaWsyZIkz+rHuQAAgJZp8tzSp+0j/ZmgTOZJSVb25VwAAEC7lKzOeXlUP07VryVez+7TeQAAgDaa6k8n6E9B6SooAAAw1pr+dIIFrxMr52RpjsjtcQd5AAAYZ7dldY5sNqS7kJMsfIJyRJ4W5QQAAMbdqmzOmQs9ycILSp9GOQAAQMuVPGehp1h4QbH/BAAAmLbgbrCgPSjlgqzIttyeZNlCgwAAAK23JauzqtmQXfM9wcImKDtydpQTAABg2kHZlCcs5AQLKyglz1zQ8QAAwOLS5BkLOXyhe1DOXuDxAADA4rKgjjDvglI2pJOSJy/kzQEAgEWm2gTle3lskkMW8uYAAMAiU7K6nJ+T5nv4/AtKJ0+b97EAAMDiNZWnz/fQhexBUVAAAICHKvPvCgspKDbIAwAAD9XMf4Iyrxs1lrU5Kk1umu+bAgAAi1o3U1nVXJo7ez1wfhOUxvQEAADYp06a+V3xd75LvJ46z+MAAIBxMM+hxnwLylPmeRwAADAOmjxxPof1XFDK9L6Vx8/nzQAAgDHR5EnzOaz3Ccp5OTXJofN5MwAAYEyUrC5rc1yvh/VeULrzG9UAAABjpslZvR4ynz0oPb8JAAAwloZQUIoJCgAAMAfz2CjfU0EpG9JJY4M8AAAwB6X3jfK9TVBuzGlJDu71TQAAgLF0ZFmfh/dyQG8FZcLyLgAAoAelt30ovRWUkif09HoAAGDcDbCgNPm+nl4PAACMu8f18uJer+L12B5fDwAAjLcze3nxnAtKOT/HJjm85zgAAMA4O768PofO9cVzn6B0e2s+AAAASZrsyGPm+uK5F5RieRcAADAP3bl3iV72oCgoAABA7xoFBQAAGB1z3i4yp4JSNmQyyRnzjgMAAIyzx5akmcsL5zZB+V5OS7J8IYkAAICxdXDOy/FzeeHcCsqE5V0AAMAClLkt85rrHpRHLyAKAAAw7rpz6xRzKyjF/hMAAGBBTp/LixQUAABg8Jq5dYr9FpSyIZ00OXXhiQAAgDHWn4KSG3NSXMELAABYmEPLa7J6fy/af0Fp5rZWDAAAYFZL9j9FmdzvSTr2nzAESw9MnvKy5OSzkyUGdrCXe2+f/eu7tic77t37ua13JKUk3V3Jti3Tz+3cluzcmpRusvXOBz7femcytWP6dTvuSXbtGMx/B9Ry2rOTx78oOfjo2klGQ3cq2XxV8un/lWy+unYaxs303vZ/me0l+y8oc9xtD/N2/FnJ2r9NDj2udhLgPvfenmy/e7q83P+440G/viPZcnNy983J3bckWzYn99xaOzk8YMny5BV/mjzhnNpJRtMP/3ry/l9LPvbW2kkYL/vtFvsvKCVnzO2m9DAPB69OzvtQctBRtZMAezrgsOnHYQ/v7bjurgdKy5bNyV03JXfekNx+fXLbtdMf77h++mswaC9+h3Iym85k8hP/Pblr0/Q0BYZhDlfy2n9BmePlwGBenvsG5QQWk85kcsgx04/Z7NyW3H7dA8Vl81XTS01uuiq5+erpr8NCrD49edrP107RDj/+35LPvHd6+ScM3sIKSlmXw5L46ZHBeeQP1U4A1LBkeXLUadOPByvd5Lbr9igtVyY3fjX57heml5XBXDzyB5PGEpA5OfS45Lgzk+u/WDsJ4+GEckFWNG/L1n29YPYJSpNHpPQ9FDxg5ZG1EwCjpukkh584/XjwP2Lc+u3ku19Mrv/C7o9fTG7/bo2UjDp/v/TGBQQYnk6258QkX9/XC2YvKN2cYv8JA+Vft4BeHH7S9OPxL3rgubtvSb7z6eSblyfXXJ5c+xlXIiPxA0xvOvu/8wT0TTenZN4FpcnJ/c4DAH218ojkMc+ffiTJ1M7khi8nV34s+eYV06XF0jCA0dHJKbN9eX+b5BUUANplYsn05cuPP2v68+6u5FufTL7yweQrf5ds2uc/2gEwHLN2DAUFgMWtM5k84pnTjxe9ZXofy9c/Ol1Yvv6R6RtdAjA8ZWETlFkPBoDWOfyk5Blrph/b7kq++uHpe0B89e+npy0ADNqsQ5B97ogq52RpErf2BmDxWn5wctaLk3V/l7zlpuQllyQPf0LtVACL3cllw757yL4v2XBUTkwyMYBAADB6Dlw1PVX5tc8lb/5q8kO/mhy8unYqgMVoWW7Nsfv64r4LSrH/BIAxdcyjpu+u/TvXJa95X3Ly2bUTASwuu/a9lWS2gmL/CQDjbXJp8oRzkjdekfzSvyZnvtD9mwD6YZause9N8k1Ochd5ANjtlKdPP2789+Sj/z35zJ8l3anaqQDaqclJ+/rSvico3ZwwkDAA0GbHPiZ5xZ8kb/pScuaP1U4D0FbH7+sL+y4oTR4+kCgAsBgc8+hk7d9OL/06+Wm10wC0zTwKyiwHAQC7nfL05JeuSF7xp676BTB3+xyGzFhQdt8DxXdZAJiLpkme8rLkN69Mvn+djfQA+/fwfd0LZeYJymF5+D6/BgDMbMWhyc9sTN5weXLUqbXTAIyypblx5oHIzCVk0vIuAJi3U56e/Nrnp2/8CMDMOjMv85q5oBQFBQAWZNnK5CWXJGv+9/RkBYC9dWbuHAoKAAzS438i+dVPJ8edWTsJwGjZR+fY1z4TlxgGgH456tTpu9Gf+cLaSQBGSQ9LvBoTFADoq2Urp5d7PfcNtZMAjIqeJigPG2AQABhPnYnkJ38vOecPXIoYYB+dY18F5dgBBgGA8fbs1yU/c1HSuKI/MNaOmenJh3xnLK/M8iSHDZBM1GsAACAASURBVDwOAIyzZ56bvPRSkxRgnB09080aH/pPNytnbjIAQJ+d/erp5V4A42lJNuWIBz/50ILSVVAAYGie9drk+W+unQKgjs5Dt5bMtPjV/hMAGKYf+a3kyS+tnQJg+MpDhyMPLSgzvAgAGKCmSV76zuSkp9ZOAjBczdwmKAoKAAzbkuXJmr9ODl5dOwnA8HQt8QKA0XXIMcmr/nz6fikA46CZyxIvExQAqOe0Zyc//KbaKQCGxR4UABh5z/+N5MQn104BMAxzWOLVxOJXAKipM5G8/E+SJStqJwEYtKMf/MReBaWck4kkhw8tDgAws6PPSF6woXYKgEE78sFP7D1BOTyHJ7EzDwBGwXPfkDzscbVTAAzSirI+K/d8Yu+CMvHQBgMAVNKZTF789un7pAAsViVH7flpZ7YvAgCVnfKM5EnuMg8sYp29hyR7F5SuCQoAjJwXvSVZekDtFACDMesEJSYoADByDjk2edZra6cAGJRZCkpjggIAI+k//KfkQBfaBBah7mxLvGa4zBcAMAJWHDp9VS+AxaaZvaBY4gUAo+pZ5ycHHFY7BUC/zXoVLxMUABhVyw+eLikAi8ssE5QmRww1CgDQm2f/oit6AYtLmb2g2H0HAKPswMOTp7y8dgqA/mmy19rVBy/xsrAVAEbdcy9ImgdvIwVorb2GJPd/dyvrszLJ0qHHAQB6c9RpySN/sHYKgH45qKzJkvs+eeCfX3ZlVZU4AEDvzn517QQA/dKk88BKrs4eT1veBQBtceYL3bgRWDy6DwxLHigoEyYoANAak0uTJ5xTOwVAf0zOVFC6CgoAtMpTX1E7AUB/zDhBscQLANrlpKcmR59ROwXAwnVmLigmKADQNu6JAiwGZaaCEhMUAGidp7zMPVGAxWCGq3gpKADQPoc+bHqpF0CbNTNvkj+4ShgAYGEe+4LaCQAWpuSg+3655x4UBQUA2uixP1o7AcBCzVBQ9mgtAECLHPuY5MhTaqcAmL9m5gmKggIAbfXo59dOADB/5YHVXJN7PK2gQJvsuCfZdGVy7+21kzAoBxyWdCaT5QclS5YnS1Yky1YmE0tqJ2MUPfZHk3++sHYKgPm6v4s8UFCaHJRSJQzQi+13J3/zq8kn35Xs3FY7DbWsODSZXJocuCo58PDkgN0fV+756yOSg1cnq05IDjk26UzUTs0gnfoDyfKDk2131U4CMB8zFJRikzyMvB33Jn/w3OQ7n66dhNq23jH9ccvmub1+Ykly6HHTZWXVCcnhJyarjk+OODl52OOnpzW02+TS5IznJV/869pJAOZj74JSzslEkhXV4gBz85H/ppwwP1M7k1u/M/2YyaoTkoc9bvfj8dOPw09KmmaYKVmoU79fQQHa6qAy/bdOmZ6gHJeDsr1yJGD/PvHu2glYrG67dvrx5Q888Nzyg5MTnjS9dOi0ZyUnPjmZXFYtInPwiO+vnQBgviayJityae6dLig7bJCHkbfjnuSO62unYJxsuyv5xj9OP5LpTfqnPzt57I8lj/2R6TuYM1qOOzNZcUiy9c7aSQB6181BSe6dvsywmzTC6NtpzEllO7cm//6h5M/XJm86PvndpyQf/5/JXTfVTsZ9OhPJKU+vnQJgfpZOD02mC0rXBAWAHpQyvR/qsl9Mfv1hycYfSf79/ySlWzsZpzyzdgKA+dndSSbv/6Qz68sBYGbdXdOTlX//UHLUqcmzXpuc/epk6QG1k42nRygoQEtN7DlBmTBBAaAPNl+dvO91yX8+MfnIW9yrp4YTnqQcAu00Nb3tZLqgFAUFgD66++bk/f8p+a3Tk8+9r3aa8TK5NDn+rNopAHrX2XOCEpvkARiA265L/ujFye8/J7npG7XTjI+HP6F2AoDelb0LigkKAINz1ceT//qE5JPu5TMUD/++2gkAerdXQWkUFAAGbMe9yXtelfzJy6fv68PgKChAG+21xMseFACG5VPvSX7vme6fMkhHPzJZsrx2CoDeWOIFQDXf/ULy3582fdUv+m9iSXLsY2qnAOjVHlfxssQLgGG79dvJ256V3Pqd2kkWp4dZ5gW0zl53kncVLwCG784bk//5g8mWzbWTLD72oQBt0+y9SX5l1TAAjK+br0kueVGyc2vtJIvLwx5fOwFAbx60B2VFxSgAjLtvfSJ53y/WTrG4HH1G7QQAvVqePFBQXOoDgLqu+EN3ne+nAw5LVh5ROwXA3BUFBYBR8+drp+8+T38cdVrtBABz1ygoAIyae29PLrPUq29Wn147AUAvFBQARtCX3p987R9qp1gcjjq1dgKAXigoAIyo//2GZGpn7RTtZ4kX0C7TBaVsSCfJ0sphAOAB3/ta8ol31U7RfpZ4Ae2ye4JyZ5bVTgIAD/GRtyTdXbVTtNtRpyadidopAOZqSdmQyU62Wd4FwAi69dvJZ/+ydop2m1yWHHxM7RQAc7c5yzuZUlAAGFEf/d2klNop2m3V8bUTAMzdrizvZKmCAsCIuuHLydX/XDtFuykoQJssy/JOugoKACPsk++unaDdDnt47QQAczeloAAw6j7/V8nWO2qnaC8FBWiTbpZ3UhQUAEbYzq3J5y+rnaK9LPEC2qRkeScTCgoAI+6zf1E7QXuZoABtMmGCAkAbXP1/k3turZ2inQ4zQQFapCgoALRBd1fy1Q/XTtFOK49Ilh5QOwXA3JQs7yTuJA9AC3zpb2snaK+Dj66dAGBuOlneSccEBYAWuPKjSXeqdop2Wnlk7QQAc2OJFwCtsfXO5Pov1k7RTgcdVTsBwFwt7yQKCgAtcdU/107QTgoK0BYmKAC0ytX/UjtBOykoQFvYgwJAq1xzeVJK7RTto6AAbbF7grK0dg4AmJOtdyS3fLN2ivaxSR5oj2WdJJO1UwDAnF372doJ2scEBWiLJpOdFAUFgBa57nO1E7SPggK0RclkJ42CAkCLKCi9O+Cw2gkA5mrSEi8A2uV7X62doH0OOLR2AoC5mrDEC4B22bI5uefW2inaZdlBSWeidgqAubDEC4AWuumq2gnapWmSFYfUTgGwf8USLwDa6KYraydonxWWeQEt4CpeALTSTd+onaB9FBSgHSzxAqCFbru2doL2sVEeaAOXGQaglW79Tu0E7WOCArSBJV4AtJIJSu9skgfaoLFJHoA2umtTsnNb7RTtsmxl7QQA+1cyOZkmkym1kwDM4qhTk1OflRy4qnaS0bNrR7L5G8mV/5js2l47zfCUktx5Y3LEybWTtMeyA2snAJiLyUlLvICRtWxl8jMbkyf/3PR9HNi327+b/OnPJ9/4x9pJhufumxWUXiw5oHYCgP2zxAsYWU0nWfPXyVNeppzMxWEPT877UHLy2bWTDM/dt9RO0C4mKEAbuIoXMLLOenHyyB+snaJdJpcmP/0/a6cYnrtvrp2gXZaaoACt4CpewIh6wjm1E7TT8Wclh59YO8VwmKD0ZqkJCtAClngBI+vwE2onaK9VY/J7p6D0xhIvoA2KCQowqjq+Nc3buPzeWeLVG0u8gHaY7KTJRO0UANAzE5TeWOIFtEGxxAuAtjJB6c2SFbUTAOyfPSgAtJYJSm8ml9ZOADAXCgoALbX1ztoJ2mVyWe0EAHOhoADQUju31k7QLiYoQBuULOkk6dTOAQA923Fv7QTtYoICtEGTppMmTe0cANCz7lSya0ftFO2hoADt0HRSFBQAWmqnKcqcTVjiBbRC00kUFABayjKvuTNBAdpBQQGgxRSUuZtYkjT+ygdGXkdBAaC9FJS5a5rpkgIw2kxQAGgxlxruTePCncDIU1AAaDETlN4oKMDoU1AAaLFd22snaJfORO0EAPujoADQYt1u7QQt4698YOQpKAC0WJmqnaBdTFCA0aegANBiXQWlJ/agAKOv6STx3QqAdlJQeqOgAKPPfVAAaLHurtoJ2qWjoAAjzxIvAFrMBKU3JijA6FNQAGgxBaU3Cgow+hQUAFrMVbx6o6AAo09BAaDFTFB64zLDwOhTUABoMQWlNyYowOhTUABgbCgowOhTUABgbCgowOhzHxQAGBvugwKMPhMUABgbJijA6FNQAGBsKCjA6POdCgDGhr/2gdHnOxUAADAySidJqZ0CAAAgCgoAADBCugoKAAAwKkxQAACAkaGgAAAAI0NBAQAARkbpJOnWTgEAABATFAAAYIQoKAAAwMhQUAAAgJHhPigAAMDIMEEBAABGhoICAACMDAUFAAAYGQoKAAAwMhQUAABgZCgoAADAyFBQAACAkeE+KAAAwIhoTFAAAIBRURQUAABgdJROGgUFAAAYCaWToqAAAAAjoXSSTNVOAQAAkN1X8dpVOwUAAECSnQoKAAAwKnZZ4gUAAIyKXSYoAADAqFBQAACAEVGyq5OioAAAACOgya5OGgUFAAAYCZZ4AQAAI8ISLwAAYGRY4gUAAIwQS7wAAIARYYICAACMDHtQAACAEWKJFwAAMCIs8QIAAEaGJV4AAMAIscQLAAAYEZZ4AQAAI8MSLwAAYGQoKAAAwMjoZFcnHQUFAAAYASYoAADAyFBQAACAkeEqXgAAwMhoMtVJsr12DgAAgJRs66TJtto5AAAAkmzrpKugAAAAI6DJNku8AACA0dC1xAsAABgVjYICAACMCgUFAAAYGVPZ1smUggIAAIwAExQAAGBklGztpKOgAAAAI6DJtk52KSgAAMAI6GSbCQoAADAaFBQAAGBk7Mi2TrYrKAAAwAiYyLZOVmZ77RwAAABZnm2d3GGCAgAAjIBDsr2TP872JKV2FgAAYKxtbzak22mmy4llXgAAQE3bkqSz5ycAAABVNAoKAAAwKoqCAgAAjI49CkqjoAAAAFXtUVCKggIAAFS1NXlgide9FYMAAADsVVDurhgEAABgS/LAEq+7qkYBAADG3V3JA5vkt1SNAgAAjLs9JigKCgAAUFPZs6B0FRQAAKCixgQFAAAYFQoKAAAwMrqu4gUAAIyKzp5X8eqYoAAAABXtNUGZUlAAAICKOnsWFBMUAACgpr0Kyi4FBQAAqGjXngVlqU3yAABARTv33CR/rwkKAABQ0V25O7mvoByfe5J0a+YBAADG1vbmsuxIdheUZkO6Se6tGgkAABhX96/o6sz0JAAAwBDNWFBslAcAAGq4v4s8UFAaExQAAKCKGSYoRUEBAACqsAcFAAAYEc1MBcUSLwAAoIYy8xKvO6qEAQAAxt2d9/1izwnKbVWiAAAA422PLrLnHpTbK0QBAADGXVdBAQAARset9/1izz0olngBAADDN+MSL3tQAACAGjozFZQpBQUAAKhgaqaCUuxBAQAAKlgyU0FZZoICAAAM3a5cOMONGpsLsz3JPVUiAQAA4+q2Jin3fdLZ60uWeQEAAMP0oIt1dWb7IgAAwIDtNSTpPOiLm4cYBAAAGHclN+356YOXeN081DAAAMB4e1AH2bugdBQUAABgiJrZCooJCgAAMFyzFBR7UAAAgOHaq4OYoAAAAPV0TVAAAIDRMcsEZcIEBQAAGKIls01QlpigAAAAQ1OyY7aC8vu5M8mOYSYCAADG1h3Npdm55xN7FZQmKYllXgAAwFA8pHs8eJN8kmwaQhAAAIAbH/zETAXlIS8CAADou5LvPfipmQrKQ14EAADQd525TFAaBQUAABiC7lwmKMUSLwAAYAhmGI6YoAAAAHXMMBwxQQEAAOqYmEtBmTBBAQAAhmDrXJZ43ZSbkkwNIw8AADC27m7elS0PfvIhBaW5LFNxN3kAAGCwZtxaMtN9UOxDAQAABm3GrSUzF5Qm1w00CgAAMO6unelJBQUAABi+ku/O9PTMBSUzvxgAAKBPFBQAAGBE7GPV1swFZcoSLwAAYIA6vRQUe1AAAIBB6vSyxOvofC/JjkHmAQAAxtYdzYW5a6YvzFhQmg3pJrlhoJEAAIBxtc8VW/vaJD/rQQAAAAswr4LiSl4AAED/lfkUlDLznR0BAAAWaJ/DkH0XlE6+PZAoAADAeGvyzX19ad8FpbvvgwAAABbgW/v6wmwFZZ8HAQAALMA8CsqxuT7J9kGkAQAAxtZtzUW5fV9f3GdB2X0vlO8MIhEAADC2Zt1KMttlhpNZRi8AAADzMGvHmL2gzLK7HgAAYB5MUAAAgBHRLGyCoqAwWKXUTtAiY/Z75c/GAozR750/J73x+8W++LPBMO3ndiazF5QpS7wYsHturZ2gPe66qXaC4dqyuXaC9hqn37t7bqmdoF3u2lQ7wfDcfXPtBO0yTn82qK+zkIKyIt9M0u1nHtjLN/6pdoL2+PpHaicYrq//Q+0E7XTHDcn3vlY7xfB8/aO1E7THdz8/Xj+0X/kxU4G5uvN7yQ1frp2C8bE1R+WG2V4wa0Fp3patSa7tayTY08d+L9l6R+0Uo+/e25OPvbV2iuG6/JLk1m/XTtE+H/jPSRmjf1e6+l+Srymz+1W6yft/rXaK4dr09eTT76mdoh3+9teT7lTtFIyPq3bfzmSf9rdJPkm+0acw8FB3XJ9c9EJLvWazZXOy8QXT/zI+Trbfnbz9Pyabr66dpB1KN/m7Nyf/9se1kwzfu18yXVSY2a7tyZ+tGb8pbJL8+brkyx+onWJ0daemy8k4ft+gpiv394Jmfy8o6/K2JK/vSxzYlwMPT57+muSUpydLVtROMxp23JNc86/JFe8c7ynT5LLkyT+XnPas5KCjkmYu/64yRnbcO/0vxZ/60/Fa2vVgTSd53AuTx7wgOeSYZGJJ7UT1bduS3PCl5JN/nNw25oshHvUfkse9KDns4cnk0tpp6ttxb/K9ryafes/09w8Ypia/1WzMhtlfsh9lXdYmuahfmQAAgDHV5CXNxvz5bC/Z/z9Flv2PYQAAAParu/9usf+C0lFQAACABSvpZL+bS/dbUJqN2ZTk9r5EAgAAxtV3m425e38vmutuU1fyAgAAFmJOK7PmVlDsQwEAABai6WdBmePJAAAA9mFOq7LmVlC6+cqCogAAAOPuy3N50dwKyoSCAgAAzFvJ0vz7XF643xs13n/Gdbk1yap5RwIAAMbVdc1FOWEuL5zrVbyS5KvzDAMAAIy3Oa/I6qWgzGnNGAAAwIPMuUvMvaAU+1AAAIB5aAYxQekoKAAAwDz0cFXguReUbflKkjKfPAAAwNjakVtz1VxfPOeC0rwrW5JcO69IAADAuLqyuSw75vriXjbJJzbKAwAAvehh/0nSa0Fp8oWeXg8AAIy3ks/38vJeJyif6/H1AADAeOupQ/RaUD7T4+sBAIDxVTKVL/ZyQE8FpdmYTUlu7CkSAAAwrq5qLs2dvRzQ6wQlscwLAACYiyaf7fWQ3gtKUVAAAIA56bk79F5Q5tGCAACAMdQMo6DsVFAAAID96mZr77cp6bmgNO/MTUlu6PU4AABgjDS5qnlXtvR62Hw2ySfFFAUAAJjVvPauz6+gNPn0vI4DAADGQzf/Np/D5jtB+cS8jgMAAMbDxPw6w/wKyop8KsnOeR0LAAAsdvfkyHx5PgfOq6A0b8vWNPnSfI4FAAAWvU81G7JrPgfOb4IyzTIvAADgoZpcMd9DFRQAAKC/Sj4530PnX1C6+dd5HwsAACxWJTvyqfkePO+C0lycG5J8d77HAwAAi9JXmz/KbfM9eCFLvBLLvAAAgL0tqCMsrKA0819bBgAALEIL7AgLKyjd/N8FHQ8AACwunfzLwg5fiKPzpSS3LugcAADAYnFd8/Z8eyEnWFBBaTakm+TyhZwDAABYNP5xoSdY6Cb5pOTjCz4HAADQfn3oBgsvKJMKCgAAkKS7sP0nSdIs9AQlabI+30vJ6oWeCwAAaK1rmoty6kJPsuAJSpOUFFfzAgCAMfdP/TjJwpd4JfahAADAuOtTJ+hPQekqKAAAMNYm+7Oqqi8Fpbk0Vya5sR/nAgAAWufrzdv70wf6M0GZ9tE+ngsAAGiPf+jXifpXUJp8uG/nAgAA2qOPXaB/BaXkI0l29e18AABAG2zNslzer5P9v/buP9juur7z+PN9E0gISIFCgnTVLv6isqUruC6ind11cdrulhbWWqvdttq0kXtDEHQVdaxGtlUU3GBC7rm5EIyrApItgUqVVsSiIiKNjCC/xPBTCYaQYAhJbnLv+ewf5wQjJCG5Oee8z/ec52OGCXHg+33iwMx9zed7vqdlAyVqrAe+16rrSZIkSaqEG2IBm1t1sVZ+BgXwMS9JkiSpz7R0AzhQJEmSJE3eBNe18nLRyosVCIZYTWFWK68rSZIkqSv9KGq8spUXbOkJSkChtO4VY5IkSZK6WGn9E1StfsQLorVHPJIkSZK6VgUGyhj/hK8bliRJknrd02zhxlZftOUDJZayDvhmq68rSZIkqYsUvhrL2NLqy7b+BAWgsKIt15UkSZLUHaI9P/O3Z6DACqC06dqSJEmScm2jTV8x0paBEiP8FLi1HdeWJEmSlO7rUWN9Oy7crhMUH/OSJEmSelfbftZv50D5+7ZdW5IkSVKWOhN8uV0Xb9tAiSXcB9zVrutLkiRJSnFzjLK6XRdv3wkK+JiXJEmS1Gva/DN+ewdKm149JkmSJClJnavbefm2DpSosRK4r533kCRJktQhwb/GKKvaeYv2nqAABFe0/R6SJEmSOuGydt+g/QNlvP3/EJIkSZLark6dK9t9k7YPlBjlHgrfb/d9JEmSJLVR4RvNL2Rvq/afoDTucnlH7iNJkiSpXTryZFSnBsplwERH7iVJkiSp1caYzlWduFFHBkpcxKPAtzpxL0mSJEkt949xIU924kadOUFp8DEvSZIkqYpK51581cmBshwY6+D9JEmSJO27DRzAVzp1s44NlKixHvjHTt1PkiRJUktcGQvY3KmbdfIEBeos7ej9JEmSJO2bAS7p7O066YVcBzzc0XtKkiRJmqwfxmJu6eQNOzpQYj51gs918p6SJEmSJq3jT0B19gQFoM6lQL3j95UkSZK0N7YylS92+qYdHygxwoMEX+/0fSVJkiTtlRWxiMc7fdPOn6A0+GF5SZIkqZslveAqZ6A8zgro/BqTJEmStEceYR03ZNw4ZaDEcrZC559nkyRJkrRHLonlTGTcOOsRLwhGgZJ2f0mSJEk7M85ULs26edpAiWHuJrg+6/6SJEmSdurvYxE/ybp53glKw6Lk+0uSJEnaUcn9GT0yb14gGOQe4BWZHZIkSZIAuC1qHJ8ZkHqCElAIRjIbJEmSJD3jM9kB2Y94wRYuATZkZ0iSJEl97nE286XsiPSBEpfyFPD57A5JkiSpz9ViGVuyI9IHCgB1PgPUszMkSZKkPrWNwmh2BHTJQIkl3Af8c3aHJEmS1KeWxwg/zY6ALhkoAAQLshMkSZKkvhRcmJ2wXeprhp+tDHErhddkd0iSJEl95Pqo8absiO265wSl4ZPZAZIkSVJfKXwiO2FH3TVQZnIVcFd2hiRJktQnbo0RbsiO2FFXDZSYT53Cp7M7JEmSpD7x8eyAZ+uqgQJAnc8DD2VnSJIkST0tuIdZ/EN2xrN13UCJUbb5Ri9JkiSpzQrnxfzu+y7CrhsoAIxzMfB4doYkSZLUox5hLZdnR+xMVw6UGGUTsDC7Q5IkSepR58dytmZH7ExXDhQAJlgEPJGdIUmSJPWYR5nOJdkRu9K1AyVG+TlwfnaHJEmS1FMK58YCNmdn7ErXDhQAprMQ+Gl2hiRJktQjHuQJPpsdsTtdPVCay85vl5ckSZJaofCRbv3syXZdPVAAWMsS4IHsDEmSJKni7uUJLsuOeD5dP1CaC6/rvuFSkiRJqpTgQ7GcieyM59P1AwWAtXwWuDc7Q5IkSaqolQyzIjtiT1RioDSX3rnZHZIkSVIlBR8OKNkZe6ISAwWAWVwB/CA7Q5IkSaqUwjdjmOuyM/ZUZQZKzKdOcHZ2hyRJklQhdQrvzY7YG5UZKAAxzDeAq7M7JEmSpEoIlsUS/jU7Y29UaqA0vRcYy46QJEmSutxGxvlwdsTeqtxAiRr3A4uyOyRJkqSuFpwXo6zOzthblRsoAIxxLvBYdoYkSZLUpR5hnAXZEZNRyYESl/IU8LHsDkmSJKkrBe+LUTZlZ0xGJQcKAGu5GLg9O0OSJEnqKsHNDHNldsZkVXagNL+8sVKvTJMkSZLarE6ds6rypYw7U9mBAhA1riequw4lSZKkFrskRvhedsS+qPRAaXo38GR2hCRJkpQq+BnwgeyMfVX5gRLDPAbVe7+zJEmS1FKF90SN9dkZ+6ryAwWAWdQIbs7OkCRJkpL8CzUuz45ohZ4YKDGfOgO8C9iW3SJJkiR12BhwepU/GL+jnhgoAHERdwCfye6QJEmSOir431Hj3uyMVumZgQLABB8FHsjOkCRJkjrkXqZwQXZEK/XUQGl+W+bc7A5JkiSpAwrBYCxiLDuklXpqoABEja8Cl2V3SJIkSW02HMN8Izui1XpuoAAwjbnAI9kZkiRJUps8QFT/O092picHSlzIk9SZTY+8yUCSJEnaQZ0B3hHDbMwOaYeeHCgAsYSvARdnd0iSJEkt9ulYzDezI9qlZwcKAAfyHuDH2RmSJElSi9zNdD6aHdFOPT1Q4gKepvAOYCK7RZIkSdpH4wR/EQvYnB3STj09UABihJsoLMzukCRJkvZJ8HcxzK3ZGe3W8wMFgP34IPDD7AxJkiRpkm5jnL/LjuiEvhgosYgxpvB26O3jMEmSJPWkpwn+NEbZlh3SCX0xUADiIu6g8P7sDkmSJGmvBEMxzN3ZGZ0S2QGdVk7nMoK3ZXdIkiRJz6uwLEZ4Z3ZGJ/XNCcozpjMEPJCdIUmSJD2PH7GVM7MjOq3vBkpcyJMEbwW2ZrdIkiRJu7CFOn8cl/JUdkin9d1AAWi+nu2D2R2SJEnSTgVnxhJ+kJ2Roe8+g7JdgWCQq4BTs1skSZKkZwRXxjBvzc7I0pcnKAABha3MBh7ObpEkSZKa7mMLf5UdkalvBwpALGUdhVOBTdktkiRJ6nsbKfyPfvzcyY76eqAAxAi3UZiTNut6QgAADeVJREFU3SFJkqS+VoC/jBF+mB2Sre8HCkCM8EXgguwOSZIk9ang3KixPDujGzhQtpvFOQRfyc6QJElSnylcw0zOzc7oFn37Fq+dKYMcCtwCvDy7RZIkSX0guIdxToxRfp6d0i08QdlB1FjPBH8A/gsiSZKktlsPnOI4+WUOlGeJUe5hgL8A6tktkiRJ6ll16vzPGObH2SHdxoGyE7GYawg+kt0hSZKkHlV4fyzx888742dQdqOczmKCoewOSZIk9ZSRqDGYHdGtPEHZnSc4k8I12RmSJEnqGdeyljOyI7qZA2U3YjkT1Hk78N3sFkmSJFXe9ziQP4nlTGSHdDMf8doDZR5HMM5N+PphSZIkTc4qCifFCGuyQ7qdA2UPlTm8lCl8B5iZ3SJJkqRKWUudk2IJ92WHVIGPeO2hGGUVhVOAp7NbJEmSVBmbqfMHjpM950DZCzHC9yj8GfjcoCRJkp7XOIU/jiXcnB1SJQ6UvRQjrABm4xc5SpIkadcKwekxwrXZIVXjQJmEqPE54MzsDkmSJHWlQmFuDLM0O6SKHCiTFDUWA2dnd0iSJKnrnBMj1LIjqsqBsg+ixoUEH8vukCRJUpcIPhw1zs/OqDJfM9wCZYhPUPhAdockSZISFRbECO/Jzqg6B0qLlCEuoPDe7A5JkiQlCC6KYeZlZ/QCH/FqlWHeR7AkO0OSJEkdVljGTN6dndErHCgtElCYyRDBpdktkiRJ6pDgUo5kdsz3KyhaxUe8WqxAMMj/Ac7KbpEkSVJbjTCLuY6T1nKgtEkZ5GPAR7I7JEmS1AaFT8UI52Rn9CIHShuVQc4BzsvukCRJUkt9Mmq+wbVdHChtVgaZCyzC/68lSZKqrlB4X4zw6eyQXuYPzR1QBpkD1PClBJIkSVVVKJwVIyzMDul1DpQOKYO8HfgcMDW7RZIkSXtlAvjrqPHZ7JB+4EDpoDLIqcAXgRnZLZIkSdojm4A/jRpXZ4f0CwdKh5XTeS3Bl4GZ2S2SJEnarXUEfxjDfDs7pJ84UBKUQY4GvgK8MrtFkiRJO3U/8N+ixr3ZIf3GgZKkzOYw9uca4A3ZLZIkSfolt1L4/RhhTXZIP/KtUkliKevYzJuA5dktkiRJesY/MMF/dpzkcaAkimVsYS1vAxZnt0iSJImlzOLNMcqm7JB+5iNeXaIM8j4a3zrvaJQkSeqsOvChqPHJ7BA5ULpKGeJ3KVwOHJLdIkmS1CeeAv7c1wh3DwdKlynv4uUMcDXwquwWSZKkHncfdU6NJdyVHaJf8HGiLhNLuI8xTgRXvCRJUht9lWm81nHSfTxB6VIFgkHeD3wch6QkSVKrFOBTzOJDMZ96doyey4HS5coQp1D4AnBwdoskSVLFbaEwJ0b4fHaIds2BUgFlkOOAFcDR2S2SJEkV9QB1Tosl/CA7RLvno0MVEDVuZyqvBq7IbpEkSaqcwjVs5TWOk2rwBKViyhB/TqEGzMhukSRJ6nJjBOcwzMJofPZEFeBAqaAyl2Op8yXg2OwWSZKkLvUg8Lao8d3sEO0dH/GqoFjMnYzxOoIvZrdIkiR1oauYxqsdJ9XkCUrFNR/5GgYOzG6RJElKtoXgAzHMZ7JDNHkOlB5Q5nIsE1xO8JvZLZIkSUnuZApvi4u4IztE+8ZHvHpALOZO6pxA8DFgIrtHkiSpg+oEC5nKCY6T3uAJSo8pc/mPFJZROCa7RZIkqc0eAN4ZNW7MDlHreILSY2IxtzCN44FPAvXsHkmSpDYowCjBcY6T3uMJSg8rp/N6gmXAy7JbJEmSWuRhBvjLWMzXs0PUHp6g9LAY4SbGOB4YxS8nkiRJ1bcc+PeOk97mCUqfKO/iTQwwjKcpkiSpelYRDMUw/5wdovbzBKVPxBK+xlqOBT4AjGX3SJIk7YFtBAs5kN9ynPQPT1D6UBniZRRqwMnZLZIkSbvwbQY4PRZzZ3aIOsuB0sfKIG8BFgNHZLdIkiQ1PUkwn5ksivm+kbQfOVD6XBnkUIL5FM7AR/4kSVKu5RTOiBHWZIcojwNFAJQh3gAsoPCa7BZJktR3bgPO9jtNBA4U7aBAMMgfAecDL8nukSRJPW8twd/yOBfFciayY9QdHCh6jjKHGUxhHvBh4KDsHkmS1HO2Eowwhb+JRWzIjlF3caBol8rp/BrBR4C/ws+nSJKk1rgWeHfUuD87RN3JgaLnVQY5EVgAnJjdIkmSKutWCmfHCDdlh6i7OVC0x8ogJwOfAl6d3SJJkirjboLzmMkXfG2w9oQDRXulzGeAn/Fm4G+BV2T3SJKkrvUQ8HHWstQPwGtvOFA0KTsMlU8AL83ukSRJXaLwEwa4gCmMxCLGsnNUPQ4U7ZMyh/2YwjuBjwJHZfdIkqQ0TwDnM52FsYDN2TGqLgeKWqLMYQYDDBK8B4eKJEn9I/gZdS5kgItimI3ZOao+B4paqryF/TmCPwE+SOGY7B5JktQ2DxJcyDgXxyibsmPUOxwoaosynwHW8N8p/A3wH7J7JElSy/yQ4HxmclnMZzw7Rr3HgaK2K0O8gcI5wO9nt0iSpEkqfJ/gPGr8v4CSnaPe5UBRx5QhTqLwXuAPgSnZPZIk6XnVgWsZ4NOxmG9mx6g/OFDUceUMjqLOHApzgcOzeyRJ0nNsAK5gggUxyj3ZMeovDhSlKfOYxgRvbZ6qHJfdI0mSuI9gMbDUN3IpiwNFXaH5OZUzgdOAqdk9kiT1kTpwA8FChrnWz5comwNFXaWczq8T/DXwDvw+FUmS2ukx4HNMcHGMsio7RtrOgaKuVOYzwM94IzAHOBXYLzlJkqRe0DgtgVEmuDpG2ZYdJD2bA0VdrwxxJPBW6swm+M3sHkmSKugR4DIGqMViHsqOkXbHgaLKKBDM5bepMxv4I2BGdpMkSV1sM8FV1LmEEW70syWqCgeKKqmczQGMcTKFP6PxvSr7ZzdJktQFJoDvAv+XqVwRi9iQHSTtLQeKKq8McijBKc2x8kZgILtJkqQOW0nweeBLMcxj2THSvnCgqKeUefwbJngzhbcAr8/ukSSpje4iWA58IYb5cXaM1CoOFPWsMsRvUDiN4DQKJ+C/75Kk6rsNuJoprIiLuCM7RmoHf2BTXyhDvIjC7wGnAL+Dry2WJFVDHbgZ+DIDrIjF/Cg7SGo3B4r6TpnNYezPf6UxVk4DDkpOkiRpR2PAtwiuZZwrY5TV2UFSJzlQ1NfK/+JANvHG5unK7wL/NrtJktSXHgauo3AdA3wthtmYHSRlcaBIOyiDHA2cTON05WRgem6RJKlHjQO3AF8GrqfG9/2eEqnBgSLtQpnDDKbwX4Dfo/G5lZclJ0mSqu0B4J+ArxLc4CmJtHMOFGkPlSGOpPDbNE5W3oSPg0mSdu8x4FvA9QxwUyzmzuwgqQocKNIklTM4igleT2Ow/A7wkuQkSVKuNcCNBDdR+LaPbUmT40CRWqTM5RUU/hN1TiJ4HfDK7CZJUlutAr4DfIfgxhjm7uwgqRc4UKQ2KfM4mHFeS/AGCq8HTgJmZHdJkiZlHPgBwU3ASsb5lxjl4ewoqRc5UKQOKXPYj/04njqvA04ETgBeiv8dSlI3eoDCSoKbqXMz61gZy9maHSX1A38wkhKVeRzMBMcBJ1A4gcZoOQYYyC2TpL6yGlhJsBJYSZ1bYoQ12VFSv3KgSF2mnMUhbGsOlsLxwHHAy4GpyWmSVHUTwI+B2yl8n8JKxlkZS1mXHSbpFxwoUgU0Hw97BXVeRXBs87TlVTRedex/x5L0XOuBuwhWUriT4C5mcFtcwNPZYZJ2zx9spAorszmMafwWhX8H/AaNN4cdAxyVWyZJHfMYcA/BvcDd1LmDOrfHKGuzwyRNjgNF6kFlHtOo8zLqvAo4GjiWxonLMcCBqXGStPe2AY8AdwF3AvcD91O43c+KSL3HgSL1kfIWpjCLF1M4mjovBY6mNH8NjgYOSU6U1L820Bgeq2iMj1UU7meAVazloVjORHKfpA5xoEh6RpnLrz4zXoKjKfw6wYuAFzf/OCg5UVJ1bQIepHES8gjwEMEqgvvZxiofyZK0nQNF0h4rgxwKvIjCixngxcCLmr9/CY3PvbwQOCCzUVKKLTRe1fso8BCFnwCPMMBDTPAwU/lJLOaJ3ERJVeFAkdRS5SwOYTNHMZUXMsFRBEfSGC9HAr8GzKIxZF6Q2Slpj2yk8SH0xwgepc5qgtUUHiVYzQCr2cJqX9MrqZUcKJJSlHcwnRdwONs4ggFmUecIBjicwhEEs5q/Hk7hcOAw4FD8AktpXxRgHY3X765t/vE4sAZYQ7CW0vx9sIZNPB7L2JKXK6lfOVAkVUY5i0PYxK8ylcOoN0fLAIdRmn8M8CsUXkBwCIUDaXxm5iAa4+YgYL/MfmkfbaNxorEe2EjwNLCRwpMET1Hn50RzgATrqLOOAdYxzjomWO8ph6SqcKBI6htlHtPYxIHszyHUeQHRHDDBwQQHs33QbB85jT/fPnQObV5m+6+/QuNEx+GjZ9s+JOrAz5v/2/odfn3uuGj89RspbKCwofnnGxngKbbyJDN4OhYx1ul/EEnK4ECRpBYoc5jBFKYxwXSmcACN0XIQhSkEB1MnGHjmNc6NcdMYQlMJDqSw/w6XOxiYssPvDwCm7/D7Kc2/ZkfbB9N2M4BpO0ndl0G1q2vuiTEab3GajO0/8D/bFmDzDr/fcRBstwF+6fW0z/57Jpp/TUOwlcLTFMabw+EX16zzJAMUChsIJppN25hgM1PYwgRjMTrpf0ZJUtP/B+0bo54G6PfBAAAAAElFTkSuQmCC"
  },
  "description": "Easily add Xiaomi Ads Pixel to your site—no coding required.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "Xiaomi Ads Event Configuration",
    "displayName": "Xiaomi Ads Event Configuration",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "pid",
        "displayName": "Pixel ID",
        "simpleValueType": true,
        "valueHint": "miads_123abc",
        "help": "You can find your Pixel ID in Asset Center"
      },
      {
        "type": "SELECT",
        "name": "event",
        "displayName": "Event Name",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "view_content",
            "displayValue": "Viewing specific webpages"
          },
          {
            "value": "button_click",
            "displayValue": "Button click"
          },
          {
            "value": "registration",
            "displayValue": "Registration"
          },
          {
            "value": "purchase",
            "displayValue": "Purchase"
          },
          {
            "value": "lead",
            "displayValue": "Form/information submission"
          },
          {
            "value": "ad_click",
            "displayValue": "Ad click"
          },
          {
            "value": "add_to_cart",
            "displayValue": "Add to cart"
          },
          {
            "value": "add_to_wishlist",
            "displayValue": "Add to wishlist"
          },
          {
            "value": "add_payment_info",
            "displayValue": "Add payment information"
          },
          {
            "value": "subscribe",
            "displayValue": "Subscribe"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "{{Event}}",
        "notSetText": "Select Event Name",
        "help": "https://global.e.mi.com/doc/platform_integration/pixel.html#supported-standard-events"
      }
    ],
    "help": "https://global.e.mi.com/doc/platform_integration/pixel.html"
  },
  {
    "type": "GROUP",
    "name": "Custom Properties",
    "displayName": "Custom Properties",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "custom_properties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Key",
            "name": "key",
            "type": "TEXT",
            "isUnique": true
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "displayName": ""
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

/*
 * Mi Pixel Sandboxed JavaScript Template
 * For Google Tag Manager Template Editor
 * Purpose: Convert GA4 events (including ecommerce) to Mi Pixel events
 */

const log = require("logToConsole");
const copyFromWindow = require("copyFromWindow");
const copyFromDataLayer = require("copyFromDataLayer");
const makeNumber = require("makeNumber");
const callInWindow = require("callInWindow");
const Object = require("Object");
const JSON = require("JSON");

// Data Layer Helpers
const ecommerce = copyFromDataLayer("ecommerce");
const eventModel = copyFromDataLayer("eventModel");
const miContents = copyFromDataLayer('mi_contents') || (eventModel && eventModel.mi_contents);
const miContentType = copyFromDataLayer('mi_content_type') || (eventModel && eventModel.mi_content_type);

// Supported Standard Events
const ValidEvents = {
  page_view: 1,
  view_content: 1,
  button_click: 1,
  registration: 1,
  purchase: 1,
  lead: 1,
  ad_click: 1,
  add_to_cart: 1,
  add_to_wishlist: 1,
  add_payment_info: 1,
  subscribe: 1
};

// Map GA4 events to Mi Pixel events
const MiEventMap = {
  'page_view': 'page_view',
  'view_item': 'view_content',
  'view_item_list': 'view_content',
  'select_item': 'view_content',
  'add_to_cart': 'add_to_cart',
  'add_to_wishlist': 'add_to_wishlist',
  'add_payment_info': 'add_payment_info',
  'begin_checkout': 'add_payment_info',
  'purchase': 'purchase',
  'sign_up': 'registration',
  'generate_lead': 'lead',
  'subscribe': 'subscribe',
  'click': 'button_click',
  'ad_click': 'ad_click'
};

const checkExistence = (key) => {
  return typeof copyFromWindow(key) !== "undefined";
};

// Helper to extract Enhanced Ecommerce Data (UA)
const getEnhancedEcommerceData = (data, ecommerce) => {
  if (!ecommerce) {
    return null;
  }

  const mappedEvent = MiEventMap[data.event] || data.event;
  
  if (mappedEvent == "view_content" && ecommerce.detail && ecommerce.detail.products) {
    return ecommerce.detail.products;
  } else if (mappedEvent == "add_to_cart" && ecommerce.add && ecommerce.add.products) {
    return ecommerce.add.products;
  } else if (mappedEvent == "add_payment_info" && ecommerce.checkout && ecommerce.checkout.products) {
    return ecommerce.checkout.products;
  } else if ((mappedEvent == "purchase" || mappedEvent == "subscribe") && ecommerce.purchase && ecommerce.purchase.products) {
    return ecommerce.purchase.products;
  } else {
    // Fallback
    if (ecommerce.detail && ecommerce.detail.products) return ecommerce.detail.products;
    if (ecommerce.add && ecommerce.add.products) return ecommerce.add.products;
    if (ecommerce.checkout && ecommerce.checkout.products) return ecommerce.checkout.products;
    if (ecommerce.purchase && ecommerce.purchase.products) return ecommerce.purchase.products;
  }
  return null;
};

const getItemCategories = (item) => {
  var categories = [];
  if (item.item_category) categories.push(item.item_category);
  if (item.item_category2) categories.push(item.item_category2);
  if (item.item_category3) categories.push(item.item_category3);
  if (item.item_category4) categories.push(item.item_category4);
  if (item.item_category5) categories.push(item.item_category5);

  if (categories.length > 0) {
    return categories.join(',');
  }
  return null;
};

// Main Ecommerce Data Parser (GA4 & UA)
const getEcommerceData = (data, ecommerce) => {
  var value = 0;
  var currency = "USD"; // default
  var contents = [];
  var totalQuantity = 0;

  /* 
    1. Standard Ecommerce (GA4)
  */
  const secData = (ecommerce && ecommerce.items) || (eventModel && eventModel.items) || miContents;
  if (secData) {
    log("Mi Pixel: Standard Ecommerce - Data layers detected");
    secData.map(function (ed) {
      var content = {};
      
      // Map ID
      if (ed.item_id) content.id = ed.item_id;
      else if (ed.id) content.id = ed.id;
      
      // Map Name
      if (ed.item_name) content.name = ed.item_name;
      else if (ed.name) content.name = ed.name;
      
      // Map Category
      var categoryString = getItemCategories(ed);
      if (categoryString) content.category = categoryString;
      else if (ed.category) content.category = ed.category;
      
      // Map Price
      if (ed.price) content.price = makeNumber(ed.price);
      
      // Map Quantity
      if (ed.quantity) {
        content.quantity = makeNumber(ed.quantity);
      } else {
        content.quantity = 1;
      }
      
      // Map Brand
      if (ed.item_brand) content.brand = ed.item_brand;
      else if (ed.brand) content.brand = ed.brand;
      
      contents.push(content);
      
      // Calculate totals
      if (ed.price) {
        value += ed.price * content.quantity;
      }
      totalQuantity += content.quantity;
    });
  } 
  
  /* 
    2. Enhanced Ecommerce (UA)
  */
  const eecData = getEnhancedEcommerceData(data, ecommerce);
  if (eecData !== null && contents.length === 0) {
    log("Mi Pixel: Enhanced Ecommerce - Data layers detected");
    eecData.map(function (ed) {
      var content = {};
      if (ed.id) content.id = ed.id;
      if (ed.name) content.name = ed.name;
      if (ed.category) content.category = ed.category;
      if (ed.price) content.price = makeNumber(ed.price);
      if (ed.brand) content.brand = ed.brand;
      if (ed.quantity) {
        content.quantity = makeNumber(ed.quantity);
      } else {
        content.quantity = 1;
      }
      contents.push(content);
      
      if (ed.price) {
        value += ed.price * content.quantity;
      }
      totalQuantity += content.quantity;
    });
  }
  
  // Determine Currency
  if (data.currency) currency = data.currency;
  else if (ecommerce && ecommerce.currencyCode) currency = ecommerce.currencyCode;
  else if (ecommerce && ecommerce.currency) currency = ecommerce.currency;
  else if (eventModel && eventModel.currency) currency = eventModel.currency;
  
  // Determine Value (Override calculated if present)
  if (data.value) {
    value = makeNumber(data.value);
  } else if (ecommerce && ecommerce.value) {
    value = ecommerce.value;
  } else if (ecommerce && ecommerce.purchase && ecommerce.purchase.actionField && ecommerce.purchase.actionField.revenue) {
    value = ecommerce.purchase.actionField.revenue;
  } else if (eventModel && eventModel.value) {
    value = eventModel.value;
  }
  
  return {
    value: value,
    currency: currency,
    contents: contents,
    totalQuantity: totalQuantity
  };
};

const main = () => {
  // 1. Determine Event Name
  const miEvent = MiEventMap[data.event] || data.event;
  
  // 2. Initialize Parameters
  var parameters = {};
  
  // 3. Handle content_id for view_content event
  if (miEvent === 'view_content' && data.content_id) {
    parameters.content_id = data.content_id;
  }
  
  // 4. Populate Ecommerce Parameters
  // Mi Pixel Recommended Params: content_type, quantity, description, item, currency, value
  const ecomData = getEcommerceData(data, ecommerce);
  
  if (ecomData.contents.length > 0 || ecomData.value > 0) {
    parameters.value = ecomData.value;
    parameters.currency = ecomData.currency;
    parameters.quantity = ecomData.totalQuantity;
    parameters.content_type = miContentType || data.content_type || "product";
    
    // Map 'item' to the list of contents (convert to JSON string)
    parameters.item = JSON.stringify(ecomData.contents);
    
    // Description - optional, can map from first item name or custom
    if (data.description) {
      parameters.description = data.description;
    } else if (ecomData.contents.length > 0 && ecomData.contents[0].name) {
      parameters.description = ecomData.contents[0].name;
    }
  }
  
  // 5. Manual Overrides / Custom Parameters from Tag Fields
  if (data.content_type) parameters.content_type = data.content_type;
  if (data.quantity) parameters.quantity = makeNumber(data.quantity);
  if (data.currency) parameters.currency = data.currency;
  if (data.value) parameters.value = makeNumber(data.value);
  if (data.description) parameters.description = data.description;
  if (data.content_id) parameters.content_id = data.content_id;
  
  // 6. Custom Properties (if defined in template fields)
  if (data.custom_properties && data.custom_properties.length > 0) {
    for (let i = 0; i < data.custom_properties.length; i++) {
      let objectParam = data.custom_properties[i];
      if (objectParam.key) {
        parameters[objectParam.key] = objectParam.value;
      }
    }
  }
  
  log("Mi Pixel: Sending Event:", miEvent, parameters);
  
  // 7. Execute Tracking Call
  // Check if miPixel is defined
  if (checkExistence("miPixel")) {
    callInWindow("miPixel", "track", miEvent, parameters, data.pid || undefined);
    log("Mi Pixel: Event sent successfully");
  } else {
    log("[ERROR] Mi Pixel: miPixel object not found. Ensure Base Code is fired first.");
  }
};

const validate = (data) => {
  // Basic validation
  if (!data.event) {
    log("[ERROR] Mi Pixel: Event name is missing");
    return ["Event name is missing"];
  }
  
  // Validate if the mapped event is supported
  const miEvent = MiEventMap[data.event] || data.event;
  if (!ValidEvents[miEvent]) {
    log("[WARNING] Mi Pixel: Event '" + miEvent + "' is not a standard Mi Pixel event. Sending anyway.");
    // Don't fail, just warn - custom events might be valid
  }
  
  return [];
};

const start = () => {
  const errors = validate(data);
  if (errors.length > 0) {
    if (data.gtmOnFailure) data.gtmOnFailure();
    return;
  }
  
  main();
  
  if (data.gtmOnSuccess) data.gtmOnSuccess();
};

start();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "miPixel"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedKeys",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Basic
  code: |-
    const mockData = {
          event: 'view_item',
          content_id: 'product123',
        };
        runCode(mockData);

        assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
        assertThat(Calls['miPixel'][0].action).isEqualTo("track");
        assertThat(Calls['miPixel'][0].eventName).isEqualTo("view_content");
        assertThat(Calls['miPixel'][0].params.content_id).isEqualTo("product123");

        assertApi('gtmOnSuccess').wasCalled();
- name: MissingEvent
  code: |-
    const mockData = {};
    runCode(mockData);

    assertThat(LogsError).contains("[ERROR] Mi Pixel: Event name is missing");
    assertApi('gtmOnFailure').wasCalled();
- name: MissingMiPixelObject
  code: |-
    mock('copyFromWindow', function(name) {
      return undefined;
    });

    const mockData = {
      event: 'purchase',
    };
    runCode(mockData);

    assertThat(LogsError).contains("[ERROR] Mi Pixel: miPixel object not found. Ensure Base Code is fired first.");
- name: InvalidEvent
  code: |-
    const mockData = {
      event: 'InvalidEvent',
    };
    runCode(mockData);

    assertThat(LogsWarn).contains("[WARNING] Mi Pixel: Event 'InvalidEvent' is not a standard Mi Pixel event. Sending anyway.");
    assertApi('gtmOnSuccess').wasCalled();
- name: PageView
  code: |2-

    const mockData = {
      event: 'page_view',
    };
    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("page_view");
    assertApi('gtmOnSuccess').wasCalled();
- name: ViewContent
  code: |-
    const mockData = {
      event: 'view_item',
      content_id: 'abc123',
    };
    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("view_content");
    assertThat(Calls['miPixel'][0].params.content_id).isEqualTo("abc123");
    assertApi('gtmOnSuccess').wasCalled();
- name: AddToCart
  code: |-
    const mockData = {
      event: 'add_to_cart',
      content_type: 'product',
      value: 29.99,
      currency: 'USD',
      quantity: 2,
      description: 'Blue T-Shirt',
    };
    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("add_to_cart");
    assertThat(Calls['miPixel'][0].params.content_type).isEqualTo("product");
    assertThat(Calls['miPixel'][0].params.value).isEqualTo(29.99);
    assertThat(Calls['miPixel'][0].params.currency).isEqualTo("USD");
    assertThat(Calls['miPixel'][0].params.quantity).isEqualTo(2);
    assertThat(Calls['miPixel'][0].params.description).isEqualTo("Blue T-Shirt");
    assertApi('gtmOnSuccess').wasCalled();
- name: Purchase
  code: |-
    const mockData = {
      event: 'purchase',
      value: 99.99,
      currency: 'USD',
    };
    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("purchase");
    assertThat(Calls['miPixel'][0].params.value).isEqualTo(99.99);
    assertThat(Calls['miPixel'][0].params.currency).isEqualTo("USD");
    assertApi('gtmOnSuccess').wasCalled();
- name: StandardEcommerce
  code: |-
    const mockData = {
      event: 'purchase',
      ecommerce: {
        currency: 'CAD',
        value: 150.00,
        items: [
          {
            item_id: 'SKU123',
            item_name: 'Running Shoes',
            item_brand: 'Nike',
            item_category: 'Footwear',
            item_category2: 'Running',
            price: 75.00,
            quantity: 2
          }
        ]
      }
    };

    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("purchase");
    assertThat(Calls['miPixel'][0].params.currency).isEqualTo("CAD");
    assertThat(Calls['miPixel'][0].params.value).isEqualTo(150.00);
    assertThat(Calls['miPixel'][0].params.quantity).isEqualTo(2);
    assertThat(Calls['miPixel'][0].params.content_type).isEqualTo("product");
    assertThat(Calls['miPixel'][0].params.item).isDefined();

    assertApi('gtmOnSuccess').wasCalled();
- name: EnhancedEcommerce
  code: |-
    const mockData = {
      event: 'purchase',
      ecommerce: {
        currencyCode: 'EUR',
        purchase: {
          actionField: {
            revenue: 199.99
          },
          products: [
            {
              id: 'PROD456',
              name: 'Laptop',
              brand: 'Dell',
              category: 'Electronics',
              price: 199.99,
              quantity: 1
            }
          ]
        }
      }
    };

    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("purchase");
    assertThat(Calls['miPixel'][0].params.currency).isEqualTo("EUR");
    assertThat(Calls['miPixel'][0].params.value).isEqualTo(199.99);
    assertThat(Calls['miPixel'][0].params.quantity).isEqualTo(1);
    assertThat(Calls['miPixel'][0].params.content_type).isEqualTo("product");
    assertThat(Calls['miPixel'][0].params.item).isDefined();

    assertApi('gtmOnSuccess').wasCalled();
- name: MultipleItems
  code: |-
    const mockData = {
      event: 'add_to_cart',
      ecommerce: {
        currency: 'USD',
        items: [
          {
            item_id: 'ITEM1',
            item_name: 'Product 1',
            price: 10.00,
            quantity: 2
          },
          {
            item_id: 'ITEM2',
            item_name: 'Product 2',
            price: 15.00,
            quantity: 1
          }
        ]
      }
    };

    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].params.value).isEqualTo(35.00);
    assertThat(Calls['miPixel'][0].params.quantity).isEqualTo(3);
    assertThat(Calls['miPixel'][0].params.item).isDefined();

    assertApi('gtmOnSuccess').wasCalled();
- name: CustomProperties
  code: |2-

    const mockData = {
      event: 'lead',
      custom_properties: [
        {
          key: 'campaign_id',
          value: 'summer2025'
        },
        {
          key: 'source',
          value: 'google'
        },
        {
          key: '',
          value: 'should_be_ignored'
        }
      ]
    };

    runCode(mockData);

    assertThat(Calls['miPixel'].length).isStrictlyEqualTo(1);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("lead");
    assertThat(Calls['miPixel'][0].params.campaign_id).isEqualTo("summer2025");
    assertThat(Calls['miPixel'][0].params.source).isEqualTo("google");
    assertThat(Calls['miPixel'][0].params['']).isUndefined();

    assertApi('gtmOnSuccess').wasCalled();
- name: EventMapping
  code: |-
    let mockData = { event: 'view_item' };
    runCode(mockData);
    assertThat(Calls['miPixel'][0].eventName).isEqualTo("view_content");

    mockData = { event: 'sign_up' };
    runCode(mockData);
    assertThat(Calls['miPixel'][1].eventName).isEqualTo("registration");

    mockData = { event: 'generate_lead' };
    runCode(mockData);
    assertThat(Calls['miPixel'][2].eventName).isEqualTo("lead");

    mockData = { event: 'begin_checkout' };
    runCode(mockData);
    assertThat(Calls['miPixel'][3].eventName).isEqualTo("add_payment_info");
- name: ManualOverrides
  code: |2-

    const mockData = {
      event: 'purchase',
      content_type: 'digital_product',
      quantity: 5,
      currency: 'GBP',
      value: 50.00,
      description: 'Premium Package',
      ecommerce: {
        currency: 'USD',
        value: 100.00,
        items: [
          {
            item_id: 'TEST',
            price: 20.00,
            quantity: 5
          }
        ]
      }
    };

    runCode(mockData);

    assertThat(Calls['miPixel'][0].params.content_type).isEqualTo("digital_product");
    assertThat(Calls['miPixel'][0].params.quantity).isEqualTo(5);
    assertThat(Calls['miPixel'][0].params.currency).isEqualTo("GBP");
    assertThat(Calls['miPixel'][0].params.value).isEqualTo(50.00);
    assertThat(Calls['miPixel'][0].params.description).isEqualTo("Premium Package");

    assertApi('gtmOnSuccess').wasCalled();
setup: "const log = require('logToConsole');\n\n\nconst LogsError = [];\nconst LogsWarn\
  \ = []; \nconst Calls = {};\n\nmock('logToConsole', function() {\n  if (arguments.length\
  \ > 0 && arguments[0].indexOf('[ERROR]') === 0) {\n    LogsError.push(arguments[0]);\n\
  \  }\n  if (arguments.length > 0 && arguments[0].indexOf('[WARNING]') === 0) {\n\
  \    LogsWarn.push(arguments[0]);\n  }\n});\n\nmock('callInWindow', function() {\n\
  \  const fnName = arguments[0];\n  Calls[fnName] = Calls[fnName] || [];\n  const\
  \ call = {};\n  call.arguments = arguments;\n  Calls[fnName].push(call);\n\n  if\
  \ (fnName === 'miPixel') {\n    call.action = arguments[1];\n    call.eventName\
  \ = arguments[2];\n    call.params = arguments[3];\n  }\n});\n\nmock('copyFromWindow',\
  \ function(name) {\n  if (name === 'miPixel') {\n    return {};\n  }\n  return undefined;\n\
  });\n\nmock('copyFromDataLayer', function(name) {\n  if (name === \"ecommerce\"\
  ) {\n    return mockData.ecommerce;\n  }\n  if (name === \"eventModel\") {\n   \
  \ return mockData.eventModel;\n  }\n  return undefined;\n});"


___NOTES___

Created on 02/12/2025, 09:50:27


